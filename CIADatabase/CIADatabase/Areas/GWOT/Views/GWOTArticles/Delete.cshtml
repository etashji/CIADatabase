@model CIADatabase.Areas.GWOT.Models.GWOTArticle

@{
    ViewBag.Title = "Delete Article";
    Layout = "~/Areas/Users/Views/Shared/_Layout.cshtml";
    var isPrologue = ViewBag.SectionTitle == "Prologue"; // Dynamically check if the section is "Prologue"
}

<div class="container mt-4">
    <h2 class="text-center">Confirm Delete</h2>
    <h4 class="text-center mb-4">Are you sure you want to delete this article?</h4>

    <!-- Time and Location -->
    <div class="mb-4 text-left" style="max-width: 900px; margin: 0 auto;">
        @if (isPrologue)
        {
            <p><strong>Date:</strong> @Model.ZuluTime.ToString("MMMM dd, yyyy")</p>
        }
        else
        {
            <p>
                <strong>Time:</strong>
                @Model.ZuluTime.ToString("HH:mm") Zulu (@Model.LocalTime.ToString("HH:mm") Local)
            </p>
        }
        <p><strong>Location:</strong> @Model.Location</p>
    </div>

    <!-- Political, Military, and President Region Maps -->
    @if (Model.PoliticalMap != null || Model.MilitaryMap != null || Model.PresidentRegionMap != null)
    {
        <h3 class="mb-3 text-center">Situation Maps</h3>
        <div class="mb-4" style="max-width: 900px; margin: 0 auto;">
            <div class="d-flex justify-content-center align-items-center flex-wrap">
                @if (Model.PoliticalMap != null)
                {
                    <a href="data:image/png;base64,@Convert.ToBase64String(Model.PoliticalMap)" data-lightbox="group1" data-title="Political Map">
                        <img src="data:image/png;base64,@Convert.ToBase64String(Model.PoliticalMap)" alt="Political Map" class="img-thumbnail m-2" style="width: 100%; max-width: 900px;" />
                    </a>
                }
                @if (Model.MilitaryMap != null)
                {
                    <a href="data:image/png;base64,@Convert.ToBase64String(Model.MilitaryMap)" data-lightbox="group1" data-title="Military Map">
                        <img src="data:image/png;base64,@Convert.ToBase64String(Model.MilitaryMap)" alt="Military Map" class="img-thumbnail m-2" style="width: 100%; max-width: 900px;" />
                    </a>
                }
                @if (Model.PresidentRegionMap != null)
                {
                    <a href="data:image/png;base64,@Convert.ToBase64String(Model.PresidentRegionMap)" data-lightbox="group1" data-title="President Region Map">
                        <img src="data:image/png;base64,@Convert.ToBase64String(Model.PresidentRegionMap)" alt="President Region Map" class="img-thumbnail m-2" style="width: 100%; max-width: 900px;" />
                    </a>
                }
            </div>
        </div>
    }

    <!-- Country, Region, City, and Local Maps -->
    @if (Model.CountryMap != null || Model.RegionMap != null || Model.CityMap != null || Model.LocalMap != null)
    {
        <h3 class="mb-3 text-center">Geographical Maps</h3>
        <div class="mb-4" style="max-width: 900px; margin: 0 auto;">
            <div class="d-flex justify-content-center align-items-center flex-wrap">
                @if (Model.CountryMap != null)
                {
                    <a href="data:image/png;base64,@Convert.ToBase64String(Model.CountryMap)" data-lightbox="group2" data-title="Country Map">
                        <img src="data:image/png;base64,@Convert.ToBase64String(Model.CountryMap)" alt="Country Map" class="img-thumbnail m-2" style="width: 100%; max-width: 900px;" />
                    </a>
                }
                @if (Model.RegionMap != null)
                {
                    <a href="data:image/png;base64,@Convert.ToBase64String(Model.RegionMap)" data-lightbox="group2" data-title="Region Map">
                        <img src="data:image/png;base64,@Convert.ToBase64String(Model.RegionMap)" alt="Region Map" class="img-thumbnail m-2" style="width: 100%; max-width: 900px;" />
                    </a>
                }
                @if (Model.CityMap != null)
                {
                    <a href="data:image/png;base64,@Convert.ToBase64String(Model.CityMap)" data-lightbox="group2" data-title="City Map">
                        <img src="data:image/png;base64,@Convert.ToBase64String(Model.CityMap)" alt="City Map" class="img-thumbnail m-2" style="width: 100%; max-width: 900px;" />
                    </a>
                }
                @if (Model.LocalMap != null)
                {
                    <a href="data:image/png;base64,@Convert.ToBase64String(Model.LocalMap)" data-lightbox="group2" data-title="Local Map">
                        <img src="data:image/png;base64,@Convert.ToBase64String(Model.LocalMap)" alt="Local Map" class="img-thumbnail m-2" style="width: 100%; max-width: 900px;" />
                    </a>
                }
            </div>
        </div>
    }

    <!-- Briefing -->
    <h3 class="mb-3 text-center">Briefing</h3>
    <div class="mb-4 text-left" style="max-width: 900px; margin: 0 auto;">
        @Html.Raw(Model.Briefing)
    </div>

    <!-- Video -->
    @if (!string.IsNullOrEmpty(Model.Video))
    {
        <h3 class="text-center">Video</h3>
        <div class="mb-4 d-flex justify-content-center">
            <iframe width="560" height="315" src="@Model.Video" frameborder="0" allowfullscreen></iframe>
        </div>
    }

    <!-- Updated Maps -->
    @if (Model.UpdatedPoliticalMap != null || Model.UpdatedMilitaryMap != null || Model.UpdatedRegionMap != null)
    {
        <h3 class="mb-3 text-center">Updated Situation Maps</h3>
        <div class="mb-4" style="max-width: 900px; margin: 0 auto;">
            <div class="d-flex justify-content-center align-items-center flex-wrap">
                @if (Model.UpdatedPoliticalMap != null)
                {
                    <a href="data:image/png;base64,@Convert.ToBase64String(Model.UpdatedPoliticalMap)" data-lightbox="group3" data-title="Updated Political Map">
                        <img src="data:image/png;base64,@Convert.ToBase64String(Model.UpdatedPoliticalMap)" alt="Updated Political Map" class="img-thumbnail m-2" style="width: 100%; max-width: 900px;" />
                    </a>
                }
                @if (Model.UpdatedMilitaryMap != null)
                {
                    <a href="data:image/png;base64,@Convert.ToBase64String(Model.UpdatedMilitaryMap)" data-lightbox="group3" data-title="Updated Military Map">
                        <img src="data:image/png;base64,@Convert.ToBase64String(Model.UpdatedMilitaryMap)" alt="Updated Military Map" class="img-thumbnail m-2" style="width: 100%; max-width: 900px;" />
                    </a>
                }
                @if (Model.UpdatedRegionMap != null)
                {
                    <a href="data:image/png;base64,@Convert.ToBase64String(Model.UpdatedRegionMap)" data-lightbox="group3" data-title="Updated Region Map">
                        <img src="data:image/png;base64,@Convert.ToBase64String(Model.UpdatedRegionMap)" alt="Updated Region Map" class="img-thumbnail m-2" style="width: 100%; max-width: 900px;" />
                    </a>
                }
            </div>
        </div>
    }

    <!-- After Action Report -->
    <h3 class="text-center">After Action Report</h3>
    <div class="mb-4 text-left" style="max-width: 900px; margin: 0 auto;">
        @Html.Raw(Model.AfterActionReport)
    </div>

    <!-- Confirm Delete -->
    @using (Html.BeginForm())
    {
        @Html.AntiForgeryToken()
        <div class="d-flex justify-content-center mt-4">
            <input type="submit" value="Delete" class="btn btn-danger btn-lg w-50" />
        </div>
    }

    <!-- Back to List Button -->
    <div class="d-flex justify-content-center mt-4">
        @Html.ActionLink(
            "Back to List",
            "Details",
            "GWOTSections",
            new { id = Model.GWOTSectionId, area = "GWOT" },
            new { @class = "btn custom-btn btn-lg w-25" }
        )
    </div>
</div>
